<?xml version="1.0" encoding="UTF-8"?>
<ipfix xmlns="urn:ietf:params:xml:ns:yang:ietf-ipfix-psamp">

	<!--## Every collecting process will be started as new process -->
	<collectingProcess>
		<!--## Arbitrary collecting process name  -->
		<name>UDP collector</name>
		<!--## Type of the collector. Supported types are defined in internalcfg.xml -->
		<udpCollector>
			<!--## Arbitrary udp collector name -->
			<name>Listening port 4739</name>
			<!--## Local listening port -->
			<localPort>4739</localPort>
			<!--## Template lifetime in seconds -->
			<templateLifeTime>1800</templateLifeTime>
			<!--## Options template lifetime in seconds -->
			<optionsTemplateLifeTime>1800</optionsTemplateLifeTime>
			<!--## Template lifetime in packets (for how many packets is template valid) -->
			<!-- <templateLifePacket>5</templateLifePacket>  -->
			<!--## Options template lifetime in packets -->
			<!-- <optionsTemplateLifePacket>100</optionsTemplateLifePacket>  -->
			<!--## Local address to listen on. If empty, bind to all interfaces -->
			<localIPAddress></localIPAddress>
		</udpCollector>
		<!--## Name of the exporting process. Must match exporting process name -->
		<exportingProcess>Forward UDP</exportingProcess>
	</collectingProcess>

	<!--## Exporting process configuration -->
	<exportingProcess>
		<!--## Name of the exporting process, must match <exportingProcess> element
			   in <collectingProcess> -->
		<name>Forward UDP</name>
		<!--## Specification of storage plugin -->
		<destination>
			<!--## Arbitrary name -->
			<name>Forward flows to collectors</name>

			<!--## Configuration to storage plugin -->
			<fileWriter>
				<!--## Plugin (internal plugin identification) -->
				<fileFormat>forwarding</fileFormat>

				<!--## Distribution type -->
				<distribution>RoundRobin</distribution>
				<!--## Default port number. It can be overriden by port tag in destination. -->
				<defaultPort>4739</defaultPort>
				<!--## Connection type for all destinations -->
				<protocol>udp</protocol>

				<!--## Life time of UDP templates (in seconds) -->
				<templateLifeTime>300</templateLifeTime>
				<optionsTemplateLifeTime>300</optionsTemplateLifeTime>

				<!--## Destination address -->
				<% @collectors_real.each do |tmp| %>
					<destination>
						<ip><%= tmp %></ip>
					</destination>
				<% end %>

			</fileWriter>
		</destination>
		<!--## Only one plugin for all ODIDs -->
		<singleManager>yes</singleManager>
	</exportingProcess>

	<!-- List of active Intermediate Plugins -->
	<!-- <intermediatePlugins>
	</intermediatePlugins> -->
</ipfix>
